<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="admin">
	<select id="selectAllMemberCount" resultType="_int">
		select count(*) from member_tbl 
	</select>
	
	<select id="selectAllOrderCount" resultType="_int">
		select count(*) from order_tbl
	</select>
	
	<select id="selectAllBoardCount" resultType="_int">
		select count(*) from board_tbl
	</select>
	
	<select id="selectAllSalesCount" resultType="_int">
		select sum(product_price) from product_tbl pt join order_tbl ot on (pt.product_no = ot.product_no) where ot.order_status = 4
	</select>
	
	<select id="selectBestSalesCount" resultType="_int"> <!-- 판매량 기준 1~5 사이의 금액을 뽑아옴 -->
		select rownum as rnum, total_sales.* from
		(select DISTINCT
		    b1.board_no as items,
		    (select count(*) from board_join b2 where b2.board_no=b1.board_no) * (select board_price from board_tbl b3 where b3.board_no=b1.board_no) as total_count 
		from board_join b1 order by total_count desc) total_sales where rnum between 1 and 5
	</select>
	
	
	
	
	
	<select id="selectBeforeMember" resultType="_int">
		select count(*) from member_tbl where reg_date between '2023-03-20' and sysdate-1
	</select>
	
	<!-- <select id="selectAllOrderCount" resultType="_int">
		select count(*) from product_tbl
	</select>
	 -->
	
	<select id="selectBeforeOrder" resultType="_int">
		select count(*) from order_tbl where order_date between '2023-03-20' and sysdate-1 
	</select>
	
	<select id="selectBeforeBoard" resultType="_int">
		select count(*) from board_tbl where board_start between '2023-03-20' and sysdate-1 
	</select>
	
	
	
	
</mapper>
